<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¹Ø¯Ù‘ ÙˆØ±Ù‚ Ø§Ù„ØªØ±ÙŠÙƒØ³</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial;
  background:#eaeaea;
  text-align:center;
  padding:10px;
  margin:0;
}

/* Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…ØªØºÙŠØ± */
#signature{
  position: fixed;
  top: 10px;
  right: 10px;
  font-size: 22px;
  font-weight: bold;
  animation: glow 0.5s infinite;
}

@keyframes glow {
  0%   { color: red; }
  20%  { color: orange; }
  40%  { color: yellow; }
  60%  { color: green; }
  80%  { color: blue; }
  100% { color: purple; }
}

h2{margin:30px 0 5px}

/* Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
#count{
  font-size:20px;
  margin-bottom:10px;
  color:#000;
}

/* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙˆØ±Ù‚ */
.cardsBox{
  background:#fff;
  padding:10px;
  border-radius:10px;
  margin-bottom:10px;
}

/* Ø²Ø± Ø§Ù„ÙˆØ±Ù‚Ø© - Ø­Ø¬Ù… Ø£ÙƒØ¨Ø± */
.cardBtn{
  width:110px;     /* Ø¹Ø±Ø¶ Ø£ÙƒØ¨Ø± */
  height:80px;     /* Ø§Ø±ØªÙØ§Ø¹ Ø£ÙƒØ¨Ø± */
  margin:6px;
  border:1px solid #ccc;
  border-radius:6px;
  background:#fff;
  font-size:32px;  /* Ø®Ø· Ø£ÙƒØ¨Ø± */
  font-weight:bold;
}

/* Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙˆØ±Ù‚ */
.S{color:#000;}      /* â™  */
.H{color:#c62828;}   /* â™¥ */
.D{color:#c62828;}   /* â™¦ */
.C{color:#000;}      /* â™£ */

/* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
.stats{
  background:#fff;
  padding:10px;
  border-radius:10px;
  margin-top:10px;
  font-size:15px;
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
.controlBtn{
  margin:5px;
  padding:10px 18px;
  font-size:15px;
  border:none;
  border-radius:6px;
  color:#fff;
}

.reset{background:#555;}
.undo{background:#1976d2;}
</style>
</head>

<body>

<div id="signature">Ù…Ù€Ø²Ø¢Ø¥Ø¬Ù€ÙŠ</div>

<h2>ğŸ‚¡ Ø¹Ø¯Ù‘ ÙˆØ±Ù‚ Ø§Ù„ØªØ±ÙŠÙƒØ³</h2>
<div id="count">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 52</div>

<div class="cardsBox" id="buttons"></div>

<div class="stats" id="stats"></div>

<button class="controlBtn undo" onclick="undo()">â†©ï¸ ØªØ±Ø§Ø¬Ø¹</button>
<button class="controlBtn reset" onclick="reset()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø©</button>

<script>
const suits = ['S','H','D','C'];
const suitIcons = {S:'â™ ',H:'â™¥',D:'â™¦',C:'â™£'};
const ranks = ['A','K','Q','J','10','9','8','7','6','5','4','3','2'];

let cards = JSON.parse(localStorage.getItem("cards"));
let history = JSON.parse(localStorage.getItem("history")) || [];
let finishedSuits = {};

if(!cards) reset();
else buildButtons();

function save(){
  localStorage.setItem("cards",JSON.stringify(cards));
  localStorage.setItem("history",JSON.stringify(history));
}

function reset(){
  finishedSuits = {};
  history = [];
  cards=[];
  for(let s of suits)
    for(let r of ranks)
      cards.push(r+s);

  save();
  buildButtons();
  update();
}

function play(card){
  if(!cards.includes(card)) return;

  history.push(card);
  cards = cards.filter(c => c !== card);
  save();

  document.getElementById(card).style.display="none";
  update();
}

function undo(){
  if(history.length===0) return;

  let last = history.pop();
  cards.push(last);
  save();

  document.getElementById(last).style.display="inline-block";
  update();
}

function update(){
  document.getElementById("count").innerText =
    "Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: " + cards.length;

  let text="";
  for(let s of suits){
    let c = cards.filter(x => x.endsWith(s)).length;
    text += `${suitIcons[s]} Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${c}<br>`;

    if(c===0 && !finishedSuits[s]){
      alert(`âŒ Ø®Ù„Øµ Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ ${suitIcons[s]}`);
      finishedSuits[s]=true;
    }
  }
  document.getElementById("stats").innerHTML=text;
}

function buildButtons(){
  let html="";
  // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø¨Ø­ÙŠØ« â™¦ Ø¢Ø®Ø±
  const displayOrder = ['S','H','C','D'];  // â™¦ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø¢Ø®Ø±
  for(let s of displayOrder){
    for(let r of ranks){
      let c = r+s;
      let hidden = cards.includes(c) ? "" : "style='display:none'";
      html += `
        <button id="${c}" class="cardBtn ${s}"
        onclick="play('${c}')" ${hidden}>
        ${r}${suitIcons[s]}
        </button>`;
    }
    html += "<br>";
  }
  document.getElementById("buttons").innerHTML=html;
}
</script>

</body>
</html>
